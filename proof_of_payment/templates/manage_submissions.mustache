{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template enrol_paymentproof/view_submission

    Template for viewing a single payment proof submission.

    Context variables required for this template:
    * submission - The submission object
    * course - The course object
    * user - The user who submitted
    * reviewer - The reviewer (if applicable)
    * can_review - Boolean indicating if current user can review
    * sesskey - Session key for security
    * returnurl - URL to return to
    * review_form_html - HTML for the review form (if applicable)
}}

<div class="enrol_paymentproof_view">
    <h2>{{#str}}viewsubmission, enrol_paymentproof{{/str}} - {{{course.fullname}}}</h2>
    
    <div class="enrol_paymentproof_submission card mb-3">
        <div class="card-header">
            <h3>{{#str}}submissiondetails, enrol_paymentproof{{/str}}</h3>
        </div>
        <div class="card-body">
            <div class="container-fluid p-0">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>{{#str}}submittedby, enrol_paymentproof{{/str}}:</strong> 
                            <a href="{{user.profileurl}}" target="_blank">{{{user.fullname}}}</a>
                        </p>
                        <p><strong>{{#str}}datesubmitted, enrol_paymentproof{{/str}}:</strong> 
                            {{submission.timecreated}}
                        </p>
                        <p><strong>{{#str}}paymentreference, enrol_paymentproof{{/str}}:</strong> 
                            {{submission.paymentreference}}
                        </p>
                        <p><strong>{{#str}}paymentdate, enrol_paymentproof{{/str}}:</strong> 
                            {{submission.paymentdate}}
                        </p>
                    </div>
                    
                    <div class="col-md-6">
                        <p><strong>{{#str}}paymentamount, enrol_paymentproof{{/str}}:</strong> 
                            {{submission.currency}}{{submission.paymentamount}}
                        </p>
                        <p><strong>{{#str}}paymentmethod, enrol_paymentproof{{/str}}:</strong> 
                            {{submission.paymentmethod}}
                        </p>
                        <p><strong>{{#str}}submissionstatus, enrol_paymentproof{{/str}}:</strong> 
                            {{#submission.ispending}}
                                <span class="badge badge-warning">{{#str}}status:pending, enrol_paymentproof{{/str}}</span>
                            {{/submission.ispending}}
                            {{#submission.isapproved}}
                                <span class="badge badge-success">{{#str}}status:approved, enrol_paymentproof{{/str}}</span>
                            {{/submission.isapproved}}
                            {{#submission.isrejected}}
                                <span class="badge badge-danger">{{#str}}status:rejected, enrol_paymentproof{{/str}}</span>
                            {{/submission.isrejected}}
                        </p>
                    </div>
                </div>
                
                {{#submission.comments}}
                    <div class="row mt-3">
                        <div class="col-12">
                            <div class="card bg-light">
                                <div class="card-header">
                                    <h4>{{#str}}comments, enrol_paymentproof{{/str}}</h4>
                                </div>
                                <div class="card-body">
                                    {{{submission.comments}}}
                                </div>
                            </div>
                        </div>
                    </div>
                {{/submission.comments}}
                
                {{#submission.fileurl}}
                    <div class="row mt-3">
                        <div class="col-12">
                            <h4>{{#str}}uploadfile, enrol_paymentproof{{/str}}</h4>
                            <div class="mb-3">
                                <a href="{{submission.fileurl}}" class="btn btn-secondary" target="_blank">
                                    <i class="fa fa-download" aria-hidden="true"></i>
                                    {{#str}}downloadproof, enrol_paymentproof{{/str}}
                                </a>
                            </div>
                            
                            {{#submission.filepreview}}
                                <div class="enrol_paymentproof_preview">
                                    <img src="{{submission.filepreview}}" class="img-fluid" alt="{{#str}}paymentproof, enrol_paymentproof{{/str}}">
                                </div>
                            {{/submission.filepreview}}
                        </div>
                    </div>
                {{/submission.fileurl}}
                
                {{#submission.reviewed}}
                    <div class="row mt-3">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header bg-info text-white">
                                    <h4>{{#str}}reviewdetails, enrol_paymentproof{{/str}}</h4>
                                </div>
                                <div class="card-body">
                                    <p><strong>{{#str}}reviewedby, enrol_paymentproof{{/str}}:</strong>
                                        <a href="{{reviewer.profileurl}}" target="_blank">{{{reviewer.fullname}}}</a>
                                    </p>
                                    <p><strong>{{#str}}datereveiwed, enrol_paymentproof{{/str}}:</strong>
                                        {{submission.timereveiwed}}
                                    </p>
                                    <p><strong>{{#str}}actiontaken, enrol_paymentproof{{/str}}:</strong>
                                        {{#submission.isapproved}}
                                            <span class="badge badge-success">{{#str}}status:approved, enrol_paymentproof{{/str}}</span>
                                        {{/submission.isapproved}}
                                        {{#submission.isrejected}}
                                            <span class="badge badge-danger">{{#str}}status:rejected, enrol_paymentproof{{/str}}</span>
                                        {{/submission.isrejected}}
                                    </p>
                                    
                                    {{#submission.reviewcomments}}
                                        <div class="mt-3">
                                            <h5>{{#str}}reviewcomments, enrol_paymentproof{{/str}}</h5>
                                            <div class="card bg-light">
                                                <div class="card-body">
                                                    {{{submission.reviewcomments}}}
                                                </div>
                                            </div>
                                        </div>
                                    {{/submission.reviewcomments}}
                                </div>
                            </div>
                        </div>
                    </div>
                {{/submission.reviewed}}
            </div>
        </div>
    </div>
    
    {{#can_review}}
        {{#submission.ispending}}
            <div class="enrol_paymentproof_review card mb-3">
                <div class="card-header">
                    <h3>{{#str}}reviewsubmission, enrol_paymentproof{{/str}}</h3>
                </div>
                <div class="card-body">
                    {{{review_form_html}}}
                </div>
            </div>
        {{/submission.ispending}}
    {{/can_review}}
    
    <div class="enrol_paymentproof_actions mt-3">
        <a href="{{returnurl}}" class="btn btn-secondary">{{#str}}back{{/str}}</a>
    </div>
</div>